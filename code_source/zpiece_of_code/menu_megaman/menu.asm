trailer:
	call	BUFCLR
	ld	a, 32
	ld	e, 0
	ld	ix, thumb1
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	call	_getkey
	call	BUFCLR
	ld	a, 32
	ld	e, 0
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	call	_getkey
	call	BUFCLR
	ld	a, 32
	ld	e, 0
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	call	_getkey
	call	BUFCLR
	ld	a, 32
	ld	e, 0
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	call	_getkey
	call	BUFCLR
	ld	a, 32
	ld	e, 0
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	call	_getkey
	call	BUFCLR
	ld	a, 32
	ld	e, 0
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	call	_getkey
	ret
	







menu_print:
	call	BUFCLR
	ld	e, 0
	ld	a, 0
	ld	ix, thumb1
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	ld	e, 0
	ld	a, 32 
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	ld	e, 0
	ld	a, 64
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	ld	e, 32
	ld	a, 0 
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	ld	e, 32
	ld	a, 32
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	ld	e, 32
	ld	a, 64
	call	draw_sprite_aligned_32x32
	call	BUFCOPY
	ld	e, 0
	ld	a, 0
	call	graphic_select
	call	BUFCOPY
	jp	menu_loop
	ret

; Accessible avec un jump pas un ret
menu_loop:
	call	_getkey
        cp      1       ; ->
        jp      z, menu_right
        cp      2       ; <-
        jp      z, menu_left   
        cp      3       ; ->
        jp      z, menu_up
        cp      4       ; <-
        jp      z, menu_down   
        cp      5       ; enter
        jp      z, menu_right       ; Sortir du menu
	jp	menu_loop

menux:
	.db 0
menuy:
	.db 0

select_or_unselect:

	ld	a, (menuy)
	ld	e, a
	ld	a, (menux)
	call	graphic_select
	call	BUFCOPY
	ret

menu_right:
	call	select_or_unselect
	ld	hl, menux
	ld	a, (hl)
	cp	64
	jp	p, mr_pas_droite
	ld	h, 0
	ld	l, a
	ld	de, 32
	add	hl, de
	ld	a, l
	ld	hl, menux
	ld	(hl),a
mr_pas_droite:
	call	select_or_unselect
	jp	menu_loop

menu_left:
	call	select_or_unselect
	ld	hl, menux
	ld	a, (hl)
	cp	1
	jp	m, ml_pas_gauche
	ld	b, 32
	sub	b
	ld	hl, menux
	ld	(hl),a
ml_pas_gauche:
	call	select_or_unselect
	jp	menu_loop

menu_up:
	call	select_or_unselect
	ld	hl, menuy
	ld	a, (hl)
	cp	1
	jp	m, mu_pas_haut
	ld	b, 32
	sub	b
	ld	hl, menuy
	ld	(hl),a
mu_pas_haut:
	call	select_or_unselect
	jp	menu_loop
	
menu_down:
	call	select_or_unselect
	ld	hl, menuy
	ld	a, (hl)
	cp	32
	jp	p, md_pas_bas
	ld	h, 0
	ld	l, a
	ld	de, 32
	add	hl, de
	ld	a, l
	ld	hl, menuy
	ld	(hl),a
md_pas_bas:
	call	select_or_unselect
	jp	menu_loop


	
	
	
	



; ix = sprite adress
; e  = y
; a = x
draw_sprite_aligned_32x32:
	; Multiplier y * 12
        ld      h, 0
        ld      l, e
        ld      d, 0
        add     hl, de  
        add     hl, de
        add     hl, hl
        add     hl, hl
     
        ; Diviser x par 8
        ld      d, 0
        ld      e, a
        srl     e   
        srl     e   
        srl     e   
        add     hl, de  ; Ajouter x

	
	ld      b, 32    ; La hauteur du sprite en pixel
	ld      de, plotsscreen ; Adresse de depart (graph buffer)
        add     hl, de          ; On ajoute le decalage
        push    hl\ pop de      ; Copier hl dans de   

ds_a_32_bigloop: 
	push	bc
ds_a_32_loop:
	ld	a, (ix)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	a, (ix)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	a, (ix)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	a, (ix)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	de, 8
	add	hl, de
	
	pop	bc
	djnz	ds_a_32_bigloop

	ret	
	
; ix = sprite adress
; e  = y
; a = x
graphic_select:
	; Multiplier y * 12
        ld      h, 0
        ld      l, e
        ld      d, 0
        add     hl, de  
        add     hl, de
        add     hl, hl
        add     hl, hl
     
        ; Diviser x par 8
        ld      d, 0
        ld      e, a
        srl     e   
        srl     e   
        srl     e   
        add     hl, de  ; Ajouter x

	
	ld      b, 32    ; La hauteur du sprite en pixel
	ld      de, plotsscreen ; Adresse de depart (graph buffer)
        add     hl, de          ; On ajoute le decalage
        push    hl\ pop de      ; Copier hl dans de   

gs_a_32_bigloop: 
	push	bc
gs_a_32_loop:
	ld	a, 11111111b
	xor	(hl)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	a, 11111111b
	xor	(hl)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	a, 11111111b
	xor	(hl)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	a, 11111111b
	xor	(hl)
	ld	(hl), a
	inc	ix
	inc	hl
	ld	de, 8
	add	hl, de
	
	pop	bc
	djnz	gs_a_32_bigloop

	ret	
	

	

thumb1:
	.db 00000010b,00010000b,10000100b,00000000b
	.db 00000011b,00111001b,11001100b,00000000b
	.db 00000010b,11111001b,11111100b,00000000b
	.db 00000010b,01111001b,11100100b,00000000b
	.db 00000010b,00110001b,11000100b,00000000b
	.db 00000010b,00010011b,00000100b,00000000b
	.db 00000010b,10001100b,01000100b,00000000b
	.db 00000010b,11000000b,11000100b,00000000b
	.db 00000010b,01100001b,10000100b,00000000b
	.db 00000010b,00110011b,00000100b,00000000b
	.db 00011110b,00110011b,00000111b,11111100b
	.db 00011111b,00000000b,00001111b,11111100b
	.db 00001111b,10001110b,00011111b,11111000b
	.db 00001111b,11000000b,00111111b,11101100b
	.db 00011011b,11100000b,01111111b,11101100b
	.db 00010011b,11111111b,11111111b,11111100b
	.db 00011111b,11111110b,01111111b,01111110b
	.db 00111111b,11110001b,11111100b,01000010b
	.db 00100001b,01110011b,11110000b,01011010b
	.db 00100001b,00111111b,11100000b,01001010b
	.db 00101101b,00111111b,11101000b,01101010b
	.db 00101001b,00100110b,00111100b,00111110b
	.db 00011110b,11111111b,11111111b,00000000b
	.db 00000001b,11111111b,11111111b,00000000b
	.db 00000011b,11111110b,01111111b,00000000b
	.db 00000111b,11111100b,00111111b,00000000b
	.db 00011111b,11111000b,00011111b,11000000b
	.db 01100001b,11110000b,00011111b,00110000b
	.db 10000000b,00100000b,00010000b,00001000b
	.db 10000000b,00100000b,00010000b,00001000b
	.db 11111111b,11100000b,00011111b,11111000b
	.db 11111111b,11100000b,00011111b,11111000b

thumb2:
	.db 00000000b,00000100b,00000000b,10000000b
	.db 00000000b,00000100b,00000001b,01000000b
	.db 00000000b,00001010b,00000001b,01000000b
	.db 00000000b,00001001b,00000010b,01000000b
	.db 00000000b,00001001b,00000010b,01000000b
	.db 00000000b,00001000b,11000100b,10000000b
	.db 00000000b,00000100b,00111000b,10000000b
	.db 00000000b,00000011b,00000011b,00000000b
	.db 00000000b,00000000b,11111100b,00000000b
	.db 00000000b,00000001b,10011110b,00000000b
	.db 00000000b,00000001b,10011110b,00000000b
	.db 00000000b,00000011b,11111111b,10000000b
	.db 00000000b,00011110b,11101111b,01000000b
	.db 00000000b,00010111b,01011011b,10100000b
	.db 00000000b,00010101b,01010011b,10100000b
	.db 00000000b,00011101b,11110011b,01000000b
	.db 00000000b,00111100b,01000011b,11000000b
	.db 00000000b,11000111b,01111110b,01100000b
	.db 00000001b,10000011b,11111100b,00111000b
	.db 00000011b,11000001b,11110000b,01111000b
	.db 00001111b,11111100b,00000011b,11111000b
	.db 00001111b,11000100b,00000010b,11111000b
	.db 00001111b,11000111b,11111110b,11111000b
	.db 00000011b,10000101b,11111101b,01110000b
	.db 00000000b,00001000b,11110000b,10000000b
	.db 00000000b,00010000b,01100000b,01000000b
	.db 00000000b,00111000b,10010001b,11000000b
	.db 00000000b,01111101b,00001111b,11000000b
	.db 00000000b,11111110b,00001111b,11000000b
	.db 00000011b,11111110b,00011111b,11110000b
	.db 00001111b,11111110b,00011111b,11111000b
	.db 00001111b,11111110b,00011111b,11111000b
	.db 00000000b,00000000b,00000000b,00000000b

thumb4:
	.db 00000000b,00001111b,11000000b,00000000b
	.db 00000000b,00110000b,00110000b,00000000b
	.db 00000000b,01000000b,00001000b,00000000b
	.db 00000000b,01000100b,00001000b,00000000b
	.db 00000000b,11101110b,11111100b,00000000b
	.db 00000000b,10001110b,00000100b,00000000b
	.db 00011111b,10001110b,01100110b,11111100b
	.db 01100111b,11110000b,11011111b,11100110b
	.db 01000111b,11011001b,11011111b,11100011b
	.db 11111111b,11011111b,10111011b,11111110b
	.db 01111111b,11100100b,01110011b,11111110b
	.db 00111111b,10111111b,11011111b,11111110b
	.db 00111111b,10000000b,00011111b,11111110b
	.db 00111111b,11000000b,00111111b,11110010b
	.db 00100111b,11111111b,11111111b,11100110b
	.db 00100011b,11111111b,11111111b,11001110b
	.db 00110001b,11111011b,11111101b,10011110b
	.db 01111111b,11111111b,11110101b,11111110b
	.db 01001111b,10000000b,00000111b,11110010b
	.db 01001111b,11000000b,00001111b,11110010b
	.db 01111111b,11111111b,11111111b,11111110b
	.db 01111111b,00111111b,11110011b,10011110b
	.db 00110010b,00001111b,11000011b,00011100b
	.db 00011110b,00000111b,00000001b,11111100b
	.db 00001111b,10001000b,10000011b,10000000b
	.db 00001111b,11110000b,01001111b,11000000b
	.db 00001111b,11100000b,00111111b,11000000b
	.db 00011111b,11110000b,01111111b,11100000b
	.db 00111111b,11110000b,01111111b,11110000b
	.db 00111111b,11110000b,01111111b,11110000b
	.db 00000000b,00000000b,00000000b,00000000b
	.db 00000000b,00000000b,00000000b,00000000b
	.db 00000000b,00000000b,00000000b,00000000b

thumb5:
	.db 00000000b,00011111b,11110000b,00000000b
	.db 00000000b,00100000b,00111000b,00000000b
	.db 00000000b,01000000b,00000100b,00000000b
	.db 00000000b,01000000b,00100100b,00000000b
	.db 00000000b,01111111b,11110010b,00000000b
	.db 00111000b,00111111b,11111101b,00000000b
	.db 01111100b,00011110b,01111100b,10000000b
	.db 01111100b,00011001b,11111111b,01000000b
	.db 11111100b,00011001b,11111110b,01000000b
	.db 11111100b,00101110b,00111111b,01011100b
	.db 11111100b,01000100b,00111111b,10111110b
	.db 01111111b,01111111b,11111111b,01111110b
	.db 01111111b,11011011b,00111111b,11111111b
	.db 00111111b,00100000b,00111110b,01111111b
	.db 00011111b,00000000b,00111100b,01111111b
	.db 00001111b,11001100b,00111111b,11111111b
	.db 00000111b,11001100b,01110111b,11111111b
	.db 00000000b,11100000b,11001111b,11111110b
	.db 00000000b,01011111b,00111111b,11111100b
	.db 00000000b,01000000b,00111111b,10000000b
	.db 00000000b,01000000b,01111111b,10000000b
	.db 00000000b,11001100b,01111111b,10000000b
	.db 00000000b,11010110b,01111111b,11000000b
	.db 00000001b,11011110b,00111111b,11100000b
	.db 00000011b,11001100b,00111111b,11100000b
	.db 00001111b,11100000b,11001111b,11110000b
	.db 00111111b,11011111b,11000111b,11111000b
	.db 01111111b,11011111b,00000111b,11111000b
	.db 11111111b,11000000b,00001111b,11111100b
	.db 11111111b,10000000b,00001111b,11111110b
	.db 00000000b,00000000b,00000000b,00000000b
	.db 00000000b,00000000b,00000000b,00000000b

thumb6:
	.db 00000000b,00001111b,11111100b,00000000b
	.db 00000000b,00011111b,11111110b,00000000b
	.db 00000000b,01111111b,11111111b,10000000b
	.db 00000000b,10000000b,00001111b,11000000b
	.db 00000001b,00000000b,00000001b,11000000b
	.db 00000001b,00011111b,11110001b,11100000b
	.db 00000010b,00111100b,00001000b,11110000b
	.db 00000010b,01111000b,00001000b,11110000b
	.db 00000010b,01100000b,00001000b,11110000b
	.db 00000010b,01101001b,10000000b,11110000b
	.db 00000010b,01101001b,10010000b,11110000b
	.db 00000010b,01100001b,10000000b,11110000b
	.db 00000111b,00000000b,00000000b,11110000b
	.db 00001111b,00001111b,00000001b,11111000b
	.db 00010011b,10001001b,10000001b,11111100b
	.db 00100001b,11000000b,00000111b,11111100b
	.db 01000001b,11100000b,00001111b,11111110b
	.db 11001001b,01111110b,11111111b,11110011b
	.db 11000010b,01111110b,11111111b,01100011b
	.db 11000010b,01111110b,11111110b,00010011b
	.db 01111100b,10000000b,00000001b,00100011b
	.db 00111000b,10000000b,00000001b,01000011b
	.db 00000000b,10000000b,00000001b,01100010b
	.db 00000000b,11111111b,11111111b,00011100b
	.db 00000001b,11111111b,11111111b,00000000b
	.db 00000011b,01111110b,01111101b,00000000b
	.db 00000100b,00111100b,01111000b,10000000b
	.db 00011000b,00011000b,00010000b,01110000b
	.db 00100000b,00010000b,00010000b,00001000b
	.db 00111111b,11100000b,00011111b,11111000b
	.db 00000000b,00000000b,00000000b,00000000b

thumb7:
	.db 00000000b,00000010b,01000100b,00000000b
	.db 00000000b,00000011b,00101100b,00000000b
	.db 00000000b,00000111b,11101100b,00000000b
	.db 00000000b,00000111b,11110010b,00000000b
	.db 00000000b,00001110b,00111110b,00000000b
	.db 00000000b,00001100b,00001100b,00000000b
	.db 00000000b,00000110b,00011000b,00000000b
	.db 00000000b,00000111b,11111110b,00000000b
	.db 00000000b,00001000b,00000010b,00000000b
	.db 00000000b,00000101b,01010100b,00000000b
	.db 00000000b,00000101b,01010100b,00000000b
	.db 00000000b,00001000b,00000010b,00000000b
	.db 00000000b,00011110b,01110010b,00000000b
	.db 00000011b,11111011b,11001111b,11111100b
	.db 00000011b,11111001b,00001001b,11111100b
	.db 00000011b,11111010b,11001011b,11111000b
	.db 00000001b,11111010b,11001011b,11110000b
	.db 00000011b,11111000b,00010111b,11100000b
	.db 00000010b,01111011b,11101111b,10110000b
	.db 00000100b,01111100b,00011111b,10001000b
	.db 00011110b,01111111b,11111111b,10011100b
	.db 00011111b,11011111b,11111110b,11111100b
	.db 00011111b,11001111b,11111100b,11111100b
	.db 00011111b,11010111b,11110010b,11111100b
	.db 00011111b,11100010b,10000110b,11111100b
	.db 00000111b,11000010b,10000010b,01111000b
	.db 00000000b,11100111b,11100011b,10000000b
	.db 00000000b,11111000b,00010111b,11000000b
	.db 00000011b,11111000b,00001110b,00111000b
	.db 00000100b,00001100b,00001000b,00001100b
	.db 00001100b,00000100b,00001000b,00001100b
	.db 00001111b,11111100b,00001111b,11111100b
